<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>商品回顾 - Aimee Tool Compass</title>
  <link href="bootstrap.min.css" rel="stylesheet">
  <link href="datatables.bootstrap5.min.css" rel="stylesheet">
  <style>
    body {
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 100%;
      margin: 0 auto;
      background-color: #f8f9fa;
    }
    .container-fluid {
      max-width: 1600px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .page-title {
      margin-bottom: 20px;
      color: #1890ff;
      font-weight: 600;
    }
    .card {
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .card-header {
      background: linear-gradient(135deg, #1890ff, #69c0ff);
      color: white;
      font-weight: 500;
      border-radius: 8px 8px 0 0 !important;
      padding: 15px 20px;
    }
    .card-body {
      padding: 20px;
    }
    .product-image {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 4px;
    }
    .table {
      width: 100% !important;
      margin: 0 auto;
      background-color: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border-radius: 8px;
    }
    .table th {
      white-space: nowrap;
      cursor: pointer;
      background-color: #f8f9fa;
    }
    .table td {
      vertical-align: middle;
      max-width: 200px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: normal;
    }
    .title-cell {
      min-width: 300px;
      max-width: 400px !important;
      white-space: normal !important;
      word-break: break-word;
    }
    .chart-container {
      height: 300px;
      margin-bottom: 20px;
    }
    .filter-section {
      background-color: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .filter-title {
      font-weight: 500;
      margin-bottom: 15px;
      color: #333;
    }
    .filter-group {
      margin-bottom: 15px;
    }
    .filter-label {
      font-weight: 500;
      margin-bottom: 5px;
      color: #666;
    }
    .loading-spinner {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }
    .spinner-border {
      width: 3rem;
      height: 3rem;
    }
  </style>
</head>
<body>
  <div class="container-fluid">
    <h3 class="page-title">商品回顾</h3>
    
    <!-- 过滤器部分 -->
    <div class="filter-section">
      <div class="filter-title">数据筛选</div>
      <div class="row">
        <div class="col-md-4">
          <div class="filter-group">
            <div class="filter-label">时间范围</div>
            <select class="form-select" id="timeRangeFilter">
              <option value="7">最近7天</option>
              <option value="14">最近14天</option>
              <option value="30" selected>最近30天</option>
              <option value="90">最近90天</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <div class="filter-group">
            <div class="filter-label">商品类型</div>
            <select class="form-select" id="productTypeFilter">
              <option value="all" selected>全部商品</option>
              <option value="hot">爆款商品</option>
              <option value="potential">潜力商品</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <div class="filter-group">
            <div class="filter-label">排序方式</div>
            <select class="form-select" id="sortFilter">
              <option value="sales" selected>销售额</option>
              <option value="conversion">转化率</option>
              <option value="gpm">GPM</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-12 text-end">
          <button class="btn btn-primary" id="applyFilters">应用筛选</button>
          <button class="btn btn-outline-secondary ms-2" id="resetFilters">重置</button>
        </div>
      </div>
    </div>

    <!-- 数据概览卡片 -->
    <div class="row">
      <div class="col-md-3">
        <div class="card">
          <div class="card-header">总销售额</div>
          <div class="card-body">
            <h3 id="totalSales">¥0.00</h3>
            <div class="text-muted" id="salesTrend">较上期 0%</div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card">
          <div class="card-header">总订单数</div>
          <div class="card-body">
            <h3 id="totalOrders">0</h3>
            <div class="text-muted" id="ordersTrend">较上期 0%</div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card">
          <div class="card-header">平均转化率</div>
          <div class="card-body">
            <h3 id="avgConversion">0%</h3>
            <div class="text-muted" id="conversionTrend">较上期 0%</div>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card">
          <div class="card-header">平均GPM</div>
          <div class="card-body">
            <h3 id="avgGPM">¥0.00</h3>
            <div class="text-muted" id="gpmTrend">较上期 0%</div>
          </div>
        </div>
      </div>
    </div>

    <!-- 图表部分 -->
    <div class="card mt-4">
      <div class="card-header">销售趋势</div>
      <div class="card-body">
        <div class="chart-container" id="salesChart">
          <div class="loading-spinner">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 商品表格 -->
    <div class="card mt-4">
      <div class="card-header">商品明细</div>
      <div class="card-body">
        <div class="table-responsive">
          <table id="productReviewTable" class="table table-striped table-hover">
            <thead>
              <tr>
                <th>商品图片</th>
                <th>商品标题</th>
                <th>价格</th>
                <th>销售额</th>
                <th>销量</th>
                <th>转化率</th>
                <th>GPM</th>
                <th>趋势</th>
              </tr>
            </thead>
            <tbody>
              <!-- 表格数据将通过JavaScript动态填充 -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- 确保按正确的顺序加载脚本 -->
  <script src="jquery.min.js"></script>
  <script src="bootstrap.bundle.min.js"></script>
  <script src="datatables.min.js"></script>
  <script src="chart.min.js"></script>
  <script src="product-review.js"></script>

  <!-- 图片预览 -->
  <div class="image-preview-overlay" style="display: none;">
    <img class="image-preview">
  </div>
</body>
</html>
